<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Galerie FC Palestina</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .test-container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; }
        .test-button { 
            background: #2c5530; 
            color: white; 
            padding: 10px 20px; 
            border: none; 
            border-radius: 5px; 
            cursor: pointer; 
            margin: 10px;
        }
        .test-button:hover { background: #1e3a21; }
        .result { 
            background: #e8f5e8; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 10px 0; 
            border-left: 4px solid #2c5530;
        }
        .error { 
            background: #ffe8e8; 
            padding: 15px; 
            border-radius: 5px; 
            margin: 10px 0; 
            border-left: 4px solid #dc3545;
        }
        .gallery-test { 
            display: grid; 
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); 
            gap: 15px; 
            margin: 20px 0; 
        }
        .jersey-card { 
            background: white; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            padding: 15px; 
            text-align: center;
        }
        .jersey-image { 
            width: 100%; 
            height: 120px; 
            background: linear-gradient(45deg, #2c5530, #4a7c59); 
            border-radius: 5px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            font-weight: bold;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>🧪 Test de la Galerie FC Palestina</h1>
        
        <div>
            <button class="test-button" onclick="testAPI()">Tester l'API</button>
            <button class="test-button" onclick="testGallery()">Tester la Galerie</button>
            <button class="test-button" onclick="loadDemoData()">Charger Données Démo</button>
            <button class="test-button" onclick="clearResults()">Effacer</button>
        </div>

        <div id="results"></div>
        <div id="gallery-test" class="gallery-test"></div>
    </div>

    <script>
        // Configuration de test
        const CONFIG = {
            API_BASE_URL: '/data',
            IMAGES_BASE_URL: '/assets/images/jerseys',
            THUMBNAILS_BASE_URL: '/assets/images/thumbnails'
        };

        function log(message, type = 'info') {
            const results = document.getElementById('results');
            const div = document.createElement('div');
            div.className = type === 'error' ? 'error' : 'result';
            div.innerHTML = `<strong>${new Date().toLocaleTimeString()}</strong> - ${message}`;
            results.appendChild(div);
        }

        function clearResults() {
            document.getElementById('results').innerHTML = '';
            document.getElementById('gallery-test').innerHTML = '';
        }

        async function testAPI() {
            log('🔄 Test de l\'API en cours...');
            
            try {
                const response = await fetch('/data/jerseys.json');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}: ${response.statusText}`);
                }
                
                const data = await response.json();
                log(`✅ API fonctionne ! ${data.length} maillots trouvés`);
                
                // Afficher les détails
                data.forEach((jersey, index) => {
                    log(`📦 Maillot ${index + 1}: ${jersey.title} (${jersey.category})`);
                });
                
            } catch (error) {
                log(`❌ Erreur API: ${error.message}`, 'error');
            }
        }

        async function testGallery() {
            log('🔄 Test de la galerie en cours...');
            
            try {
                const response = await fetch('/data/jerseys.json');
                const jerseys = await response.json();
                
                const gallery = document.getElementById('gallery-test');
                gallery.innerHTML = '';
                
                jerseys.forEach(jersey => {
                    const card = document.createElement('div');
                    card.className = 'jersey-card';
                    
                    const imageUrl = jersey.thumbnail || jersey.images[0];
                    const imagePath = `${CONFIG.IMAGES_BASE_URL}/${imageUrl}`;
                    
                    card.innerHTML = `
                        <div class="jersey-image">${jersey.title}</div>
                        <h4>${jersey.title}</h4>
                        <p><strong>Catégorie:</strong> ${jersey.category}</p>
                        <p><strong>Année:</strong> ${jersey.year}</p>
                        <p><strong>Image:</strong> ${imagePath}</p>
                    `;
                    
                    gallery.appendChild(card);
                });
                
                log(`✅ Galerie générée avec ${jerseys.length} maillots`);
                
            } catch (error) {
                log(`❌ Erreur galerie: ${error.message}`, 'error');
            }
        }

        function loadDemoData() {
            log('🔄 Chargement des données de démonstration...');
            
            const demoJerseys = [
                {
                    id: 'demo-1',
                    title: 'Maillot Domicile 2024',
                    category: 'home',
                    year: 2024,
                    thumbnail: 'jersey-home-2024-1.jpg',
                    images: ['jersey-home-2024-1.jpg']
                },
                {
                    id: 'demo-2',
                    title: 'Maillot Extérieur 2024',
                    category: 'away',
                    year: 2024,
                    thumbnail: 'jersey-away-2024-1.jpg',
                    images: ['jersey-away-2024-1.jpg']
                }
            ];
            
            const gallery = document.getElementById('gallery-test');
            gallery.innerHTML = '';
            
            demoJerseys.forEach(jersey => {
                const card = document.createElement('div');
                card.className = 'jersey-card';
                
                card.innerHTML = `
                    <div class="jersey-image">${jersey.title}</div>
                    <h4>${jersey.title}</h4>
                    <p><strong>Catégorie:</strong> ${jersey.category}</p>
                    <p><strong>Année:</strong> ${jersey.year}</p>
                `;
                
                gallery.appendChild(card);
            });
            
            log(`✅ Données de démonstration chargées`);
        }

        // Test automatique au chargement
        window.addEventListener('load', () => {
            log('🚀 Page de test chargée');
            testAPI();
        });
    </script>
</body>
</html>
